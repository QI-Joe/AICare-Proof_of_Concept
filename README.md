# AICARE - æ¦‚å¿µéªŒè¯å®éªŒåˆ†æ”¯

**ğŸ“… æœ€åæ›´æ–°**: 2026å¹´1æœˆ7æ—¥

---

## ğŸ¯ ä¸‹ä¸€é˜¶æ®µç›®æ ‡

åç«¯ RabbitMQ è¿æ¥æ¶æ„ä¸ LLM åŠŸèƒ½å·²å®Œæˆæ„å»ºåŠæµ‹è¯•é›†éªŒè¯ã€‚**ä¸‹ä¸€é˜¶æ®µé‡ç‚¹**ï¼š

- ğŸŒ **å‰ç«¯ç•Œé¢é‡æ„**ï¼šæ›´æ–° Web ç•Œé¢ä»¥æ”¯æŒæ–°çš„ RPC é€šä¿¡æ¨¡å¼
- ğŸ”Œ **API å±‚å‡çº§**ï¼š`src_api/frontend_api.py` é›†æˆ RPC Clientï¼Œæ›¿æ¢æ—§æ¥å£
- ğŸ¨ **äº¤äº’ä¼˜åŒ–**ï¼šå®ç°å®æ—¶ ASR/LLM åŠŸèƒ½çš„ Web æ¼”ç¤ºç•Œé¢
- ğŸ“Š **å¯è§†åŒ–å±•ç¤º**ï¼šä¸ºæµ‹è¯•/æ¼”ç¤ºæ„å»ºå‹å¥½çš„æ•°æ®å±•ç¤ºé¢æ¿

---

## é¡¹ç›®ç®€ä»‹

AICARE æ˜¯ä¸€ä¸ªåŸºäº **OpenAI Whisper + LLM** çš„æ™ºèƒ½è¯­éŸ³è¯†åˆ«ä¸æ–‡æœ¬å¤„ç†ç³»ç»Ÿå®éªŒé¡¹ç›®ã€‚æœ¬åˆ†æ”¯é‡‡ç”¨ **RabbitMQ + aio-pika å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—**æ¶æ„é‡æ„ï¼Œå®ç°ï¼š

- âœ… **å¼‚æ­¥ RPC æ¶æ„**ï¼šåŸºäº RabbitMQ çš„æ¾è€¦åˆé€šä¿¡ï¼Œæ”¯æŒ ASR/LLM åŒé˜Ÿåˆ—
- âœ… **æ ‡å‡†åŒ–ä»£ç ç»“æ„**ï¼š`src_backend/`, `src_api/`, `src_testset/`, `utils/` åˆ†å±‚ç®¡ç†
- âœ… **LLM é›†æˆå®Œæˆ**ï¼šQwen 0.5B æ¨¡å‹å·²é›†æˆï¼Œæ”¯æŒæ–‡æœ¬ç”Ÿæˆä»»åŠ¡
- âœ… **å®Œæ•´æµ‹è¯•å¥—ä»¶**ï¼šæ‰¹é‡æµ‹è¯•ã€ç¨³å®šæ€§æµ‹è¯•ã€LLM ä¸“é¡¹æµ‹è¯•
- âœ… **é«˜å¹¶å‘èƒ½åŠ›**ï¼šæ”¯æŒ 10+ å¹¶å‘è¯·æ±‚çš„ç¨³å®šå¤„ç†

**æŠ€æœ¯æ ˆ**ï¼šPython 3.10, RabbitMQ, aio-pika, asyncio, Whisper-small, Qwen 0.5B, PyTorch, Transformers

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       å‰ç«¯å±‚ (Frontend)                          â”‚
â”‚                    src_api/frontend_api.py                       â”‚
â”‚              FastAPI + CORS + é™æ€æ–‡ä»¶æœåŠ¡ï¼ˆå¾…å‡çº§ï¼‰               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æµ‹è¯•å®¢æˆ·ç«¯å±‚                                â”‚
â”‚                     src_testset/                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ auto_dataset_client_mimic.py - æ‰¹é‡å¹¶å‘æµ‹è¯•ï¼ˆHuggingFaceï¼‰    â”‚
â”‚  â€¢ stability_test.py            - è¿æ¥ç¨³å®šæ€§ + å‹åŠ›æµ‹è¯•          â”‚
â”‚  â€¢ test_llm_client.py           - LLM åŠŸèƒ½ä¸“é¡¹æµ‹è¯•               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ RPC_client.py
                            â”‚ â”œâ”€ call_asr(audio, sr)
                            â”‚ â””â”€ call_llm(prompt)
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ¶ˆæ¯é˜Ÿåˆ— (RabbitMQ Broker)                       â”‚
â”‚                       localhost:5672                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“® asr_queue  - è¯­éŸ³è¯†åˆ«ä»»åŠ¡é˜Ÿåˆ—                                 â”‚
â”‚  ğŸ’¬ llm_queue  - æ–‡æœ¬ç”Ÿæˆä»»åŠ¡é˜Ÿåˆ—                                 â”‚
â”‚                                                                  â”‚
â”‚  ğŸ”„ RPC æ¨¡å¼: correlation_id + reply_to + callback_queue         â”‚
â”‚  âš™ï¸  QoS: prefetch_count=2, durable=True, heartbeat=60s          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ aio_pika.connect_robust()
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åç«¯å·¥ä½œèŠ‚ç‚¹ (Backend Worker)                   â”‚
â”‚                    src_backend/Worker.py                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ ä»»åŠ¡åˆ†å‘:                                                     â”‚
â”‚     â€¢ asr_message_process() - éŸ³é¢‘ â†’ ASR Model â†’ æ–‡æœ¬           â”‚
â”‚     â€¢ llm_message_process() - æç¤ºè¯ â†’ LLM Model â†’ ç”Ÿæˆæ–‡æœ¬      â”‚
â”‚  ğŸ“¡ è¿æ¥ç®¡ç†: initial_connection(), å£°æ˜åŒé˜Ÿåˆ—                    â”‚
â”‚  âœ… å¼‚æ­¥æ¶ˆè´¹: on_message() è‡ªåŠ¨ ACK + reply_to è¿”å›              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ASR_model.py    â”‚  â”‚RPC_client.py â”‚  â”‚  utils/log.py  â”‚
â”‚                  â”‚  â”‚              â”‚  â”‚                â”‚
â”‚ ASRModel         â”‚  â”‚ RPC å°è£…å±‚   â”‚  â”‚ æ—¥å¿—é…ç½®        â”‚
â”‚ â€¢ Whisper-small  â”‚  â”‚ â€¢ connect()  â”‚  â”‚ â€¢ get_logger() â”‚
â”‚ â€¢ process()      â”‚  â”‚ â€¢ call_*()   â”‚  â”‚                â”‚
â”‚                  â”‚  â”‚              â”‚  â”‚                â”‚
â”‚ LLModel          â”‚  â”‚ Future ç®¡ç†  â”‚  â”‚ è¾“å‡ºåˆ° log/    â”‚
â”‚ â€¢ Qwen 0.5B      â”‚  â”‚ è¶…æ—¶æ§åˆ¶     â”‚  â”‚                â”‚
â”‚ â€¢ generate()     â”‚  â”‚              â”‚  â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### RPC é€šä¿¡æµç¨‹

```
Client (æµ‹è¯•è„šæœ¬)          RabbitMQ                Worker (åç«¯)
     â”‚                       â”‚                         â”‚
     â”‚ 1. ç”Ÿæˆ correlation_idâ”‚                         â”‚
     â”‚ 2. ç¼–ç è¯·æ±‚æ•°æ®         â”‚                         â”‚
     â”‚   (Base64 éŸ³é¢‘/æ–‡æœ¬)   â”‚                         â”‚
     â”‚                       â”‚                         â”‚
     â”œâ”€ PUBLISH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚
     â”‚  queue: asr/llm_queue â”‚                         â”‚
     â”‚  reply_to: callback   â”‚                         â”‚
     â”‚                       â”‚                         â”‚
     â”‚                       â”œâ”€ CONSUME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                       â”‚                         â”‚
     â”‚                       â”‚  3. è§£ç æ•°æ®             â”‚
     â”‚                       â”‚  4. è°ƒç”¨ AI æ¨¡å‹         â”‚
     â”‚                       â”‚  5. åºåˆ—åŒ–ç»“æœ           â”‚
     â”‚                       â”‚                         â”‚
     â”‚                       â”‚<â”€â”€ PUBLISH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                       â”‚  to: callback_queue     â”‚
     â”‚                       â”‚  correlation_id åŒ¹é…    â”‚
     â”‚                       â”‚                         â”‚
     â”‚<â”€ CONSUME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
     â”‚  6. Future è§£å†³        â”‚                         â”‚
     â”‚  7. è¿”å›ç»“æœç»™è°ƒç”¨æ–¹    â”‚                         â”‚
     â””                       â””                         â””
```

---

## ğŸ“¦ ä»£ç æ¨¡å—è¯´æ˜

### ğŸ”§ åç«¯æ ¸å¿ƒ (`src_backend/`)

#### 1. **Worker.py** - å¤šé˜Ÿåˆ—ä»»åŠ¡å¤„ç†å™¨
```python
ä¸»è¦åŠŸèƒ½:
  â€¢ initial_connection()      - RabbitMQ è¿æ¥åˆå§‹åŒ–
  â€¢ asr_message_process()     - ASR ä»»åŠ¡å¤„ç†ï¼ˆéŸ³é¢‘ â†’ æ–‡æœ¬ï¼‰
  â€¢ llm_message_process()     - LLM ä»»åŠ¡å¤„ç†ï¼ˆæç¤ºè¯ â†’ ç”Ÿæˆæ–‡æœ¬ï¼‰
  â€¢ on_message()              - é€šç”¨æ¶ˆæ¯è·¯ç”±å™¨ï¼ˆè‡ªåŠ¨åˆ†å‘åˆ°å¯¹åº”å¤„ç†å™¨ï¼‰
  â€¢ run()                     - å¯åŠ¨åŒé˜Ÿåˆ—æ¶ˆè´¹å¾ªç¯

å¯åŠ¨æ–¹å¼:
  cd src_backend && python Worker.py
```

#### 2. **RPC_client.py** - RPC å®¢æˆ·ç«¯å°è£…
```python
ä¸»è¦æ¥å£:
  â€¢ connect()                 - å»ºç«‹è¿æ¥ + åˆ›å»ºå›è°ƒé˜Ÿåˆ—
  â€¢ call_asr(audio, sr)       - å‘é€éŸ³é¢‘åˆ° asr_queueï¼ˆè¿”å›è¯†åˆ«æ–‡æœ¬ï¼‰
  â€¢ call_llm(prompt, timeout) - å‘é€æç¤ºåˆ° llm_queueï¼ˆè¿”å›ç”Ÿæˆæ–‡æœ¬ï¼‰
  â€¢ close()                   - å…³é—­è¿æ¥

ä½¿ç”¨ç¤ºä¾‹:
  client = RPClient()
  await client.connect()
  result = await client.call_asr(audio_array, 16000)
  llm_result = await client.call_llm("Hello, how are you?")
  await client.close()
```

#### 3. **ASR_model.py** - AI æ¨¡å‹ç®¡ç†
```python
ASRModel ç±»:
  â€¢ æ¨¡å‹: openai/whisper-small (244M å‚æ•°)
  â€¢ æ–¹æ³•: process(audio_array, sr) â†’ è½¬å½•æ–‡æœ¬
  â€¢ è‡ªåŠ¨ä¸‹è½½: é¦–æ¬¡è¿è¡Œä» HuggingFace æ‹‰å–

LLModel ç±»:
  â€¢ æ¨¡å‹: KingNish/Qwen2.5-0.5b-Test-ft
  â€¢ æ–¹æ³•: generate(prompt, max_length) â†’ ç”Ÿæˆæ–‡æœ¬
  â€¢ GPU åŠ é€Ÿ: è‡ªåŠ¨æ£€æµ‹ CUDA/MPSï¼Œå›é€€ CPU

å·¥å…·å‡½æ•°:
  â€¢ load_model_test()         - æ¨¡å‹åŠ è½½ + è®¾å¤‡åˆ†é…
  â€¢ check_model_status()      - è¾“å‡ºæ¨¡å‹çŠ¶æ€ï¼ˆè®¾å¤‡/ç²¾åº¦/å‚æ•°é‡ï¼‰
```

---

### ğŸ§ª æµ‹è¯•å¥—ä»¶ (`src_testset/`)

#### 1. **auto_dataset_client_mimic.py** - æ‰¹é‡ ASR æµ‹è¯•
```python
åŠŸèƒ½:
  â€¢ single_request_test()            - å•æ ·æœ¬æµ‹è¯•
  â€¢ concurrent_requests_test()       - å¹¶å‘æµ‹è¯•ï¼ˆé»˜è®¤ 10 ä¸ªï¼‰
  â€¢ run_batch_test_for_api()         - API æ¥å£ï¼ˆä¾›å‰ç«¯è°ƒç”¨ï¼‰

æ•°æ®é›†:
  hf-internal-testing/librispeech_asr_dummy (æ¸…æ´è‹±æ–‡è¯­éŸ³)

è¿è¡Œ:
  cd src_testset && python auto_dataset_client_mimic.py
```

#### 2. **stability_test.py** - ç³»ç»Ÿç¨³å®šæ€§éªŒè¯
```python
æµ‹è¯• 1 - è¿æ¥å¿ƒè·³æµ‹è¯•:
  â€¢ æŒç»­æ—¶é—´: 60 åˆ†é’Ÿï¼ˆå¯é…ç½® duration_minutesï¼‰
  â€¢ æ£€æŸ¥é—´éš”: æ¯ 10 ç§’
  â€¢ éªŒè¯: RabbitMQ è¿æ¥æ˜¯å¦æŒç»­æ´»è·ƒ

æµ‹è¯• 2 - å‹åŠ›æµ‹è¯•:
  â€¢ è¯·æ±‚é‡: 100 æ¬¡ï¼ˆå¯é…ç½® num_requestsï¼‰
  â€¢ å¹¶å‘æ•°: 10 ä¸ªå¹¶å‘ä»»åŠ¡
  â€¢ éŸ³é¢‘: éšæœºç”Ÿæˆ 1 ç§’ 16kHz éŸ³é¢‘
  â€¢ ç»Ÿè®¡: æˆåŠŸç‡ã€å¹³å‡å“åº”æ—¶é—´ã€é”™è¯¯æ—¥å¿—

è¿è¡Œ:
  cd src_testset && python stability_test.py
  # é€‰æ‹©: 1=å¿ƒè·³æµ‹è¯• | 2=å‹åŠ›æµ‹è¯• | 3=åŒæ—¶è¿è¡Œ
```

#### 3. **test_llm_client.py** - LLM ä¸“é¡¹æµ‹è¯•
```python
åŠŸèƒ½:
  æµ‹è¯• LLM é˜Ÿåˆ—çš„ç«¯åˆ°ç«¯é€šä¿¡ä¸æ–‡æœ¬ç”Ÿæˆèƒ½åŠ›

æµ‹è¯•ç”¨ä¾‹:
  â€¢ "Hello, how are you?"
  â€¢ "What is the capital of France?"
  â€¢ "Tell me a short joke."

è¿è¡Œ:
  cd src_testset && python test_llm_client.py

è¾“å‡ºç¤ºä¾‹:
  [Test 1] Sending prompt: Hello, how are you?
  [Response] I'm doing well, thank you for asking...
```

---

### ğŸŒ API å±‚ (`src_api/`)

#### **frontend_api.py** - FastAPI æœåŠ¡å™¨ï¼ˆå¾…å‡çº§ï¼‰
```python
å½“å‰çŠ¶æ€:
  â€¢ æä¾›é™æ€æ–‡ä»¶æœåŠ¡ (/frontend/index.html)
  â€¢ æ—§æ¥å£: /api/asr/real-time/startï¼ˆéœ€æ›¿æ¢ä¸º RPCï¼‰
  â€¢ CORS å·²é…ç½®ï¼Œæ”¯æŒè·¨åŸŸè¯·æ±‚

å¾…å‡çº§å†…å®¹:
  â€¢ é›†æˆ RPC_client.py æ›¿æ¢æ—§ WebSocket æ¥å£
  â€¢ æ–°å¢ /api/asr/batch æ‰¹é‡è¯†åˆ«æ¥å£
  â€¢ æ–°å¢ /api/llm/generate æ–‡æœ¬ç”Ÿæˆæ¥å£

è¿è¡Œ:
  cd src_api && uvicorn frontend_api:app --reload
```

---

### ğŸ› ï¸ å·¥å…·æ¨¡å— (`utils/`)

#### **log.py** - ç»Ÿä¸€æ—¥å¿—é…ç½®
```python
åŠŸèƒ½:
  â€¢ æ—¥å¿—æ–‡ä»¶: log/app_test_{today}.log
  â€¢ æ—¥å¿—çº§åˆ«: INFO
  â€¢ æ ¼å¼: æ—¶é—´æˆ³ - çº§åˆ« - æ¶ˆæ¯

ä½¿ç”¨:
  from utils.log import get_logger
  logger = get_logger()
  logger.info("ç³»ç»Ÿå¯åŠ¨")
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®ä¾èµ–

**RabbitMQ å®‰è£…** (å¿…é¡»):
```bash
# macOS
brew install rabbitmq
brew services start rabbitmq

# Ubuntu/Debian
sudo apt update && sudo apt install -y erlang rabbitmq-server
sudo systemctl start rabbitmq-server
```

**Python ç¯å¢ƒ**:
```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
cd /Users/qsh/Documents/AICare-Proof_of_Concept
source venv310/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

---

### è¿è¡Œæ­¥éª¤

**1ï¸âƒ£ å¯åŠ¨åç«¯ Worker**
```bash
cd src_backend
python Worker.py

# é¢„æœŸè¾“å‡ºï¼š
# INFO - Loading ASR model...
# INFO - Loading LLM model...
# âœ… ASR queue consuming started
# âœ… LLM queue consuming started
```

**2ï¸âƒ£ è¿è¡Œæµ‹è¯•ï¼ˆä¸‰é€‰ä¸€ï¼‰**

**é€‰é¡¹ A - æ‰¹é‡ ASR æµ‹è¯•**:
```bash
cd src_testset
python auto_dataset_client_mimic.py

# 10 ä¸ªéŸ³é¢‘æ ·æœ¬å¹¶å‘æµ‹è¯•
```

**é€‰é¡¹ B - LLM åŠŸèƒ½æµ‹è¯•**:
```bash
cd src_testset
python test_llm_client.py

# æµ‹è¯• 3 ä¸ªæ–‡æœ¬ç”Ÿæˆä»»åŠ¡
```

**é€‰é¡¹ C - ç¨³å®šæ€§æµ‹è¯•**:
```bash
cd src_testset
python stability_test.py

# é€‰æ‹©ï¼š1=å¿ƒè·³æµ‹è¯• | 2=å‹åŠ›æµ‹è¯• | 3=å…¨éƒ¨
```

---

## ğŸ“Š æµ‹è¯•ç»“æœç¤ºä¾‹

> âš ï¸ **æ³¨æ„**: ä»¥ä¸‹ä¸ºè¾“å‡ºæ ¼å¼ç¤ºä¾‹ï¼Œéå®é™…æµ‹è¯•ç»“æœ

### ASR æ‰¹é‡æµ‹è¯•è¾“å‡º
```
=== Concurrent Requests Test (10 samples) ===
Ground truths:
  0: MISTER QUILTER IS THE APOSTLE OF THE MIDDLE CLASSES...
  1: NOR IS MISTER QUILTER'S MANNER LESS INTERESTING...

[Client 1272-135031] Response received (elapsed: 2.34s)
  Text: MISTER QUILTER IS THE APOSTLE OF THE MIDDLE CLASSES...
[Client 1272-135031-1] Response received (elapsed: 2.56s)
  Text: NOR IS MISTER QUILTER'S MANNER LESS INTERESTING...
...
âœ… 10/10 tasks completed successfully
```

### LLM æµ‹è¯•è¾“å‡º
```
[Test 1] Sending prompt: Hello, how are you?
[Response] I'm doing well, thank you for asking. How can I help you today?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[Test 2] Sending prompt: What is the capital of France?
[Response] The capital of France is Paris.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… LLM Test Completed!
```

### ç¨³å®šæ€§æµ‹è¯•è¾“å‡º
```
[2026-01-07 10:00:00] Iteration 1: Connection healthy âœ“
[2026-01-07 10:00:10] Iteration 2: Connection healthy âœ“
...

=== Stress Test Results ===
Total Requests: 100
Successful: 98 (98.0%)
Failed: 2
Avg Response Time: 1.85s
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
AICare-Proof_of_Concept/
â”‚
â”œâ”€â”€ ğŸ“‚ src_backend/              # ğŸ”¥ åç«¯æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ Worker.py                #    å¤šé˜Ÿåˆ—ä»»åŠ¡å¤„ç†å™¨
â”‚   â”œâ”€â”€ RPC_client.py            #    RPC å®¢æˆ·ç«¯å°è£…
â”‚   â””â”€â”€ ASR_model.py             #    ASR/LLM æ¨¡å‹ç®¡ç†
â”‚
â”œâ”€â”€ ğŸ“‚ src_testset/              # ğŸ§ª æµ‹è¯•å¥—ä»¶
â”‚   â”œâ”€â”€ auto_dataset_client_mimic.py  # æ‰¹é‡ ASR æµ‹è¯•
â”‚   â”œâ”€â”€ stability_test.py             # ç¨³å®šæ€§ + å‹åŠ›æµ‹è¯•
â”‚   â””â”€â”€ test_llm_client.py            # LLM ä¸“é¡¹æµ‹è¯•
â”‚
â”œâ”€â”€ ğŸ“‚ src_api/                  # ğŸŒ API æœåŠ¡å±‚ï¼ˆå¾…å‡çº§ï¼‰
â”‚   â””â”€â”€ frontend_api.py          #    FastAPI æœåŠ¡å™¨
â”‚
â”œâ”€â”€ ğŸ“‚ utils/                    # ğŸ› ï¸ å·¥å…·æ¨¡å—
â”‚   â””â”€â”€ log.py                   #    æ—¥å¿—é…ç½®
â”‚
â”œâ”€â”€ ğŸ“‚ test_script/              # ğŸ§© å…¶ä»–æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ client_ollama_generate.py
â”‚
â”œâ”€â”€ ğŸ“‚ ASR_model/                # ğŸ¤– AI æ¨¡å‹å­˜å‚¨
â”‚   â””â”€â”€ openai-whisper-small/    #    Whisper æ¨¡å‹æ–‡ä»¶ï¼ˆè‡ªåŠ¨ä¸‹è½½ï¼‰
â”‚
â”œâ”€â”€ ğŸ“‚ frontend/                 # ğŸ¨ Web å‰ç«¯ï¼ˆå¾…å‡çº§ï¼‰
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ script.js
â”‚
â”œâ”€â”€ ğŸ“‚ log/                      # ğŸ“ æ—¥å¿—è¾“å‡ºç›®å½•
â”‚   â””â”€â”€ app_test_YYYY-MM-DD.log
â”‚
â”œâ”€â”€ ğŸ“‚ venv310/                  # ğŸ Python è™šæ‹Ÿç¯å¢ƒ
â”‚
â”œâ”€â”€ requirements.txt             # ğŸ“¦ ä¾èµ–æ¸…å•
â””â”€â”€ README.md                    # ğŸ“– é¡¹ç›®æ–‡æ¡£
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### RabbitMQ é…ç½®
| å‚æ•° | å€¼ | è¯´æ˜ |
|------|------|------|
| è¿æ¥åœ°å€ | `localhost:5672` | æœ¬åœ°å¼€å‘ç¯å¢ƒ |
| ç”¨æˆ·å/å¯†ç  | `guest/guest` | é»˜è®¤å‡­è¯ |
| å¿ƒè·³é—´éš” | `60 ç§’` | ä¿æŒè¿æ¥æ´»è·ƒ |
| é˜Ÿåˆ—æŒä¹…åŒ– | `durable=True` | é‡å¯åä¿ç•™é˜Ÿåˆ— |
| QoS é¢„å– | `prefetch_count=2` | æ¯æ¬¡æœ€å¤šæ‹‰å– 2 æ¡æ¶ˆæ¯ |

### éŸ³é¢‘å¤„ç†è§„èŒƒ
| å‚æ•° | å€¼ | è¯´æ˜ |
|------|------|------|
| é‡‡æ ·ç‡ | `16kHz` | Whisper æ¨¡å‹æ ‡å‡†è¾“å…¥ |
| æ•°æ®ç±»å‹ | `np.float32` | æµ®ç‚¹æ•°ç»„æ ¼å¼ |
| ç¼–ç æ–¹å¼ | `Base64` | ä¼ è¾“ç¼–ç  |

### AI æ¨¡å‹é…ç½®
| æ¨¡å‹ | è·¯å¾„/ID | å‚æ•°é‡ | ç”¨é€” |
|------|---------|--------|------|
| Whisper-small | `ASR_model/openai-whisper-small/` | 244M | è¯­éŸ³è½¬æ–‡æœ¬ |
| Qwen 0.5B | `KingNish/Qwen2.5-0.5b-Test-ft` | 500M | æ–‡æœ¬ç”Ÿæˆ |

---

## ğŸ› æ•…éšœæ’é™¤

### RabbitMQ æ— æ³•è¿æ¥
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
brew services list | grep rabbitmq          # macOS
sudo systemctl status rabbitmq-server       # Linux

# é‡å¯æœåŠ¡
brew services restart rabbitmq              # macOS
sudo systemctl restart rabbitmq-server      # Linux

# æŸ¥çœ‹æ—¥å¿—
tail -f /usr/local/var/log/rabbitmq/rabbit@*.log  # macOS
```

### Worker å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :5672

# æ¸…ç©ºæ—§é˜Ÿåˆ—ï¼ˆRabbitMQ ç®¡ç†ç•Œé¢ï¼‰
# è®¿é—®: http://localhost:15672
# ç”¨æˆ·å/å¯†ç : guest/guest
# Queues â†’ åˆ é™¤ asr_queue å’Œ llm_queue
```

### æ¨¡å‹ä¸‹è½½å¤±è´¥
```bash
# è®¾ç½® HuggingFace é•œåƒï¼ˆä¸­å›½å¤§é™†ï¼‰
export HF_ENDPOINT=https://hf-mirror.com

# æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹
huggingface-cli download openai/whisper-small --local-dir ASR_model/openai-whisper-small
```

### Import é”™è¯¯
```bash
# ç¡®ä¿ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
cd /Users/qsh/Documents/AICare-Proof_of_Concept
export PYTHONPATH="${PYTHONPATH}:$(pwd)"

# æˆ–æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåç›´æ¥è¿è¡Œ
source venv310/bin/activate
cd src_backend && python Worker.py
```

---

## âœ… å®éªŒéªŒè¯ç»“è®º

æœ¬é˜¶æ®µå·²å®Œæˆï¼š

âœ… **RabbitMQ RPC æ¶æ„**ï¼šæˆåŠŸæ›¿ä»£ WebSocketï¼Œå®ç°æ¾è€¦åˆå¼‚æ­¥é€šä¿¡  
âœ… **åŒé˜Ÿåˆ—ç³»ç»Ÿ**ï¼šASR + LLM é˜Ÿåˆ—ç‹¬ç«‹è¿è¡Œï¼Œäº’ä¸å¹²æ‰°  
âœ… **LLM é›†æˆ**ï¼šQwen 0.5B æ¨¡å‹å·²é›†æˆå¹¶é€šè¿‡ç«¯åˆ°ç«¯æµ‹è¯•  
âœ… **ä»£ç æ ‡å‡†åŒ–**ï¼šåˆ†å±‚æ¶æ„ `src_backend/`, `src_testset/`, `src_api/`, `utils/`  
âœ… **æµ‹è¯•è¦†ç›–**ï¼šæ‰¹é‡æµ‹è¯•ã€ç¨³å®šæ€§æµ‹è¯•ã€LLM ä¸“é¡¹æµ‹è¯•å…¨éƒ¨å°±ç»ª  
âœ… **å¹¶å‘æ€§èƒ½**ï¼šæ”¯æŒ 10+ å¹¶å‘è¯·æ±‚çš„ç¨³å®šå¤„ç†  
âœ… **è¿æ¥ç¨³å®šæ€§**ï¼šå¿ƒè·³æœºåˆ¶ç¡®ä¿é•¿æ—¶é—´è¿è¡Œä¸æ–­è¿

---

## ğŸ“… å¼€å‘å›¢é˜Ÿ

**AICARE å®éªŒå›¢é˜Ÿ** - 2026å¹´1æœˆ  
æ¦‚å¿µéªŒè¯å®éªŒåˆ†æ”¯ - RabbitMQ + aio-pika æ¶æ„è¿ç§»
